<div class="pcc-wrapper">
  <div class="themes categories">
    <%= render 'categories/index', categories: @categories %>
  </div>
  <div class="all-content">
    <div class="sub_categories">
      <div class="left-side-info">
        <h2>Participants</h2>
        <div class="linebetween"></div>
        <% users = [] %>
        <% @article.comments.each do |comment| %>
          <% users << comment.user %>
        <% end %>
        <% users.uniq.last(5).each do |user| %>
          <div class="user">
            <div class="photo">
              <%=image_tag user.photo_url, class: "avatar_sidebar" %>
            </div>
            <div class="infos_user">
              <ul>
                <li class="user_name"><%=user.first_name %> <%=user.last_name  %> </li>
                <li class="info"><%=user.activity%></li>
              </ul>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <div class="main-content">
      <h2>Discussion</h2>
      <div class="card listed-article">
        <%= render "shared/card", article: @article %>
      </div>
      <h2>
        <%= pluralize @article.comments.count, "contribution" %>
      </h2>
      <div id="comments">
        <% if @article.comments.blank? %>
          Soyez le premier à contribuer
        <% else %>
          <% @article.comments.each do |comment| %>
            <%= render 'comments/show', comment: comment %>
            <% end %>
          <% end %>
      </div>

      <button type="button" class="navbar-wagon-item-comment button-black" data-toggle="modal" data-target=".modal_new_comment">
              Débattre
            </button>

            <!-- Modal -->
            <div class="modal fade modal_new_comment" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content comment_form">

                    <div class="new-comment">

                      <h2>Ajoutez un commentaire</h2>

                      <%= render 'comments/form', article: @article, comment: @comment %>

                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
              </div>
            </div>


    </div>
  </div>
  <div class="footer"></div>
</div>

<!-- participants = Hash.new
participants["#{comment.user.pseudo}"] = #{comment.user.pseudo.count}
participants.sort_by {|_key, value| value}.to_h
participants.uniq! {|e| e[:"#{comment.user.pseudo}"] }-->
